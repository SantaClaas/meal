{% extends "layout.html" %}

{% block content %}

<header class="px-4 py-2">
    <hgroup>
        <h1 class="text-5xl">Tugboat</h1>
        <p>tug tug tug</p>
    </hgroup>
</header>

<main class="p-4">

    <h2>Containers</h2>

    <form action="/containers/drafts" method="post">
        <button type="submit"
            class="absolute p-2 transition-all duration-500 rounded-full shadow-xs text-slate-100 hover:bg-amber-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-amber-600 bg-amber-600 bottom-4 right-4 peer-open:hidden transition-discrete starting:translate-y-full starting:delay-500 starting:opacity-0 peer-open:opacity-0">
            <span class="sr-only">Create New</span>
            <svg height="24px" viewBox="0 -960 960 960" width="24px" fill="currentcolor" class="size-12">
                <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z">
            </svg>
        </button>
    </form>


    <ul>
        {% for container in containers %}
        <li>
            <button popovertarget="details-{{ container.id }}">{{ container.name }}</button>
            <dialog id="details-{{ container.id }}" popover>
                <h3>{{ container.name }}</h3>
                <dl>
                    <dt>Id</dt>
                    <dd>{{ container.id }}</dd>
                    <dt>Image</dt>
                    <dd>{{ container.image }}</dd>
                </dl>

                <h4>Deployment</h4>
                <p>Create a token to authenticate your webhook request to trigger a deployment</p>

                <form action="/containers/{{ container.id }}/token" method="post">
                    <button type="submit">Create Token</button>
                </form>
            </dialog>

        </li>
        {% endfor %}
    </ul>

    {# Stuff that is not as important to be rendered #}
    {% if let Some(images) = image_suggestions %}
    <datalist id="images">
        {% for image in images %}
        <option value="{{ image }}"></option>
        {% endfor %}
    </datalist>

</main>

{% endif %}

{% endblock %}

{% block scripts %}
{% endblock %}

{% call super() %}